(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{112:function(t,e,i){"use strict";var s=i(0),n=i.n(s),h=i(17),o=Object(h.d)({ButtonGroup:t=>({display:t.inline?"inline-flex":"flex",flexWrap:"wrap",margin:"0 0.25rem","&>*":{flex:"1 1 auto","&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}})});e.a=function(t){const{children:e,inline:i}=t,s=o({inline:i});return n.a.createElement("div",{className:s.ButtonGroup},e)}},171:function(t,e,i){"use strict";i.r(e);var s,n=i(48),h=i(30),o=i(44),a=i(112),c=i(14);!function(t){t[t.LEFT=0]="LEFT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"}(s||(s={}));var r=i(15);function l(t,e){return t.x>=e.x&&t.x<=e.x+e.w&&t.y>=e.y&&t.y<=e.y+e.h}class d extends class{constructor(t,e=!1,i=!1){this.rect=t,this.draggable=e,this.debug=i,this.active=!1}setContext(t){this.context=t}update(t){}render(){this.debug&&(this.context.save(),this.context.lineWidth=1,this.context.strokeStyle="red",this.context.strokeRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h),this.context.restore())}isActive(){return this.active}onKeyDown(t){}onKeyUp(t){}onMouseMove(t){if(this.active){const e=this.context.canvas.width-this.rect.w,i=this.context.canvas.height-this.rect.h;this.rect.x=Math.min(Math.max(0,t.x-this.rect.w/2),e),this.rect.y=Math.min(Math.max(0,t.y-this.rect.h/2),i)}}onMouseDown(t,e){this.draggable&&l(e,this.rect)&&(this.active=!0)}onMouseUp(t,e){this.draggable&&l(e,this.rect)&&(this.active=!1)}onDoubleClick(t){}}{constructor(t,e,i,s,n,h=!1){super(Object.assign({},i),!0,h),this.image=e,this.aliveRect=i,this.deadRect=s,this.state=n,"dead"===n?this.imageRect=s:(this.imageRect=i,"hidden"===n&&(this.draggable=!1)),this.rect.x=t.x,this.rect.y=t.y,this.rect.w=.4*this.imageRect.w,this.rect.h=.4*this.imageRect.h}setState(t){this.state=t,"dead"===t?this.imageRect=this.deadRect:(this.imageRect=this.aliveRect,"hidden"===t&&(this.draggable=!1))}update(){}render(){super.render(),"hidden"!==this.state&&(this.context.save(),this.isActive()&&(this.context.shadowBlur=15,this.context.shadowColor="#C2D2E3"),this.context.drawImage(this.image,this.imageRect.x,this.imageRect.y,this.imageRect.w,this.imageRect.h,this.rect.x,this.rect.y,this.rect.w,this.rect.h),this.context.restore())}}var u=i(16),g=i(49);class m{constructor(){this.animFrame=0,this.width=0,this.height=0,this.theSkeld=new Image,this.miraHQ=new Image,this.polus=new Image,this.players=new Image,this.loading=0,this.theSkeld.src="assets/images/TheSkeld.png",this.miraHQ.src="assets/images/MiraHQ.png",this.polus.src="assets/images/Polus.png",this.players.src="assets/images/players.png",this.theSkeld.onload=()=>{this.loading+=.25},this.miraHQ.onload=()=>{this.loading+=.25},this.polus.onload=()=>{this.loading+=.25},this.players.onload=()=>{this.loading+=.25},this.currentMapName="MiraHQ",this.currentMap={position:{x:0,y:0},image:this.miraHQ},this.entities={};const t=g.a.getState(),e=Object(u.c)(t);for(const i of Object.keys(e)){const s=e[i],n=r.b[i];this.entities[i+"Player"]=new d(s.position,this.players,n.alive,n.dead,this.getPlayerState(s,t))}this.lastTouched=0}static GetInstance(){return m.instance||(m.instance=new m),m.instance}setContext(t){this.context=t,this.width=this.context.canvas.width,this.height=this.context.canvas.height;for(const t in this.entities)this.entities[t].setContext(this.context)}setTheme(t){this.theme=t}getAnimFrame(){return this.animFrame}handleMouseMove(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.clientX-e.left)*(this.width/e.width),y:(t.clientY-e.top)*(this.height/e.height)};for(const t in this.entities)this.entities[t].onMouseMove(i)}handleMouseDown(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.clientX-e.left)*(this.width/e.width),y:(t.clientY-e.top)*(this.height/e.height)};for(const e in this.entities)if(this.entities[e].onMouseDown(t.button,i),this.entities[e].isActive())break}handleMouseUp(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.clientX-e.left)*(this.width/e.width),y:(t.clientY-e.top)*(this.height/e.height)};for(const e in this.entities)this.entities[e].onMouseUp(t.button,i)}handleMouseLeave(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.clientX-e.left)*(this.width/e.width),y:(t.clientY-e.top)*(this.height/e.height)};for(const e in this.entities)this.entities[e].onMouseUp(t.button,i)}handleDoubleClick(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.clientX-e.left)*(this.width/e.width),y:(t.clientY-e.top)*(this.height/e.height)};for(const t in this.entities)this.entities[t].onDoubleClick(i)}handleTouchStart(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.touches[0].clientX-e.left)*(this.width/e.width),y:(t.touches[0].clientY-e.top)*(this.height/e.height)};for(const t in this.entities)if(this.entities[t].onMouseDown(s.LEFT,i),this.entities[t].isActive())break}handleTouchEnd(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.touches[0].clientX-e.left)*(this.width/e.width),y:(t.touches[0].clientY-e.top)*(this.height/e.height)},n=(new Date).getTime(),h=n-this.lastTouched;for(const t in this.entities)this.entities[t].onMouseUp(s.LEFT,i),h<500&&h>0&&this.entities[t].onDoubleClick(i);this.lastTouched=n}handleTouchCancel(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.touches[0].clientX-e.left)*(this.width/e.width),y:(t.touches[0].clientY-e.top)*(this.height/e.height)};for(const t in this.entities)this.entities[t].onMouseUp(s.LEFT,i)}handleTouchMove(t){const e=t.currentTarget.getBoundingClientRect(),i={x:(t.touches[0].clientX-e.left)*(this.width/e.width),y:(t.touches[0].clientY-e.top)*(this.height/e.height)};for(const t in this.entities)this.entities[t].onMouseMove(i)}updatePlayers(){const t=g.a.getState(),e=Object(u.c)(t);for(const i of Object.keys(e)){const s=e[i];this.entities[i+"Player"].setState(this.getPlayerState(s,t))}}init(){if(void 0===this.context&&null===this.context||void 0===this.theme&&null===this.theme)throw new Error("Context and theme must be set before initializing the animation.");this.loop(0)}getPlayerState(t,e){const i=Object(c.d)(e),s=Object(c.h)(e);return t.section===i?"dead":t.section===s?"hidden":"normal"}setCurrentMap(t){const e=Object(n.b)(t);if(this.currentMapName!=e)switch(e){case"Polus":this.currentMap={position:{x:0,y:0},image:this.polus};break;case"TheSkeld":this.currentMap={position:{x:0,y:0},image:this.theSkeld};break;default:this.currentMap={position:{x:0,y:0},image:this.miraHQ}}this.currentMapName=e}update(t){const e=g.a.getState();this.setCurrentMap(e);for(const e in this.entities)this.entities[e].update(t)}render(){if(this.context.clearRect(0,0,this.width,this.height),this.loading<1)this.context.fillStyle=this.theme.textColorPrimary,this.context.font="50px "+this.theme.fontFamily,this.context.fillText("Loading...",this.width/2-50,this.height/2-10);else{this.context.drawImage(this.currentMap.image,this.currentMap.position.x,this.currentMap.position.y,this.currentMap.image.width,this.currentMap.image.height,0,0,this.width,this.height-200);for(const t in this.entities)this.entities[t].render()}}loop(t){p.update(t),p.render(),p.animFrame=window.requestAnimationFrame(p.loop)}}const p=m.GetInstance();var x=p,f=i(0),w=i.n(f),M=i(17),b=Object(M.d)(t=>({Map:{width:"100%",height:"100%",maxHeight:"calc((var(--vh, 1vh) * 100) - 9rem)",fallbacks:{maxHeight:"calc(100vh - 9rem)"},overscrollBehavior:"none",touchAction:"none"},MapImage:{display:"none"}}));var y=function(){const t=b(),e=Object(M.f)(),i=w.a.useRef(null);return w.a.useEffect(()=>{if(null!==i.current){const t=i.current.getContext("2d");if(null!=t)return x.setContext(t),x.setTheme(e),x.init(),()=>{cancelAnimationFrame(x.getAnimFrame())}}},[]),w.a.useEffect(()=>{x.setTheme(e)},[e]),w.a.createElement("canvas",{ref:i,width:1920,height:1080,className:t.Map,onContextMenu:t=>t.preventDefault(),onMouseMove:t=>x.handleMouseMove(t),onMouseDown:t=>x.handleMouseDown(t),onMouseUp:t=>x.handleMouseUp(t),onMouseLeave:t=>x.handleMouseLeave(t),onDoubleClick:t=>x.handleDoubleClick(t),onTouchStart:t=>x.handleTouchStart(t),onTouchEnd:t=>x.handleTouchEnd(t),onTouchCancel:t=>x.handleTouchCancel(t),onTouchMove:t=>x.handleTouchMove(t)},"This section is not supported on your browser.")},v=i(26),T=Object(M.d)({Maps:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"1rem",flexGrow:1},MapsHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},MapsTitle:{fontSize:"1.25rem",fontWeight:500,letterSpacing:"0.05em",marginRight:"1rem",flex:"1 0 auto"},MapsContainer:{flexGrow:1}}),C=i(100);e.default=function(){const t=Object(h.c)(v.b),e=Object(h.c)(n.b),i=Object(h.b)(),s=T(),{t:c}=Object(C.a)();return w.a.createElement("div",{className:s.Maps},w.a.createElement("div",{className:s.MapsHeader},!t&&w.a.createElement("h2",{className:s.MapsTitle},c("maps.title")),w.a.createElement(a.a,{inline:!t},w.a.createElement(o.b,{pressed:"TheSkeld"===e,onClick:()=>i(Object(n.c)("TheSkeld"))},"The Skeld"),w.a.createElement(o.b,{pressed:"MiraHQ"===e,onClick:()=>i(Object(n.c)("MiraHQ"))},"Mira HQ"),w.a.createElement(o.b,{pressed:"Polus"===e,onClick:()=>i(Object(n.c)("Polus"))},"Polus"))),w.a.createElement("div",{className:s.MapsContainer},w.a.createElement(y,null)))}}}]);